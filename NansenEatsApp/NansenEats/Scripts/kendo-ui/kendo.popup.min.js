/**
 * Copyright 2014 Telerik AD
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

!function(e,define){define(["./kendo.core.min"],e)}(function(){return function(e){function t(t,n){return t===n||e.contains(t,n)}var n=window.kendo,i=n.ui,r=i.Widget,a=n.support,o=n.getOffset,s=n._activeElement,l="open",u="close",c="deactivate",d="activate",p="center",f="left",h="right",m="top",g="bottom",v="absolute",_="hidden",b="body",w="location",y="position",k="visible",x="effects",C="k-state-active",T="k-state-border",S=/k-state-border-(\w+)/,D=".k-picker-wrap, .k-dropdown-wrap, .k-link",E="down",F=e(document.documentElement),M=e(window),P="scroll",I="resize scroll",A=a.transitions.css,O=A+"transform",H=e.extend,z=".kendoPopup",V=["font-size","font-family","font-stretch","font-style","font-weight","line-height"],B=r.extend({init:function(t,i){var a,o=this;i=i||{},i.isRtl&&(i.origin=i.origin||g+" "+h,i.position=i.position||m+" "+h),r.fn.init.call(o,t,i),t=o.element,i=o.options,o.collisions=i.collision?i.collision.split(" "):[],o.downEvent=n.applyEventMap(E,n.guid()),1===o.collisions.length&&o.collisions.push(o.collisions[0]),a=e(o.options.anchor).closest(".k-popup,.k-group").filter(":not([class^=km-])"),i.appendTo=e(e(i.appendTo)[0]||a[0]||b),o.element.hide().addClass("k-popup k-group k-reset").toggleClass("k-rtl",!!i.isRtl).css({position:v}).appendTo(i.appendTo).on("mouseenter"+z,function(){o._hovered=!0}).on("mouseleave"+z,function(){o._hovered=!1}),o.wrapper=e(),i.animation===!1&&(i.animation={open:{effects:{}},close:{hide:!0,effects:{}}}),H(i.animation.open,{complete:function(){o.wrapper.css({overflow:k}),o._trigger(d)}}),H(i.animation.close,{complete:function(){o._animationClose()}}),o._mousedownProxy=function(e){o._mousedown(e)},o._resizeProxy=function(e){o._resize(e)},i.toggleTarget&&e(i.toggleTarget).on(i.toggleEvent+z,e.proxy(o.toggle,o))},events:[l,d,u,c],options:{name:"Popup",toggleEvent:"click",origin:g+" "+f,position:m+" "+f,anchor:b,appendTo:null,collision:"flip fit",viewport:window,copyAnchorStyles:!0,autosize:!1,modal:!1,animation:{open:{effects:"slideIn:down",transition:!0,duration:200},close:{duration:100,hide:!0}}},_animationClose:function(){var t,i,r,a,o=this,s=o.options;o.wrapper.hide(),t=o.wrapper.data(w),i=e(s.anchor),t&&o.wrapper.css(t),s.anchor!=b&&(r=((i.attr("class")||"").match(S)||["","down"])[1],a=T+"-"+r,i.removeClass(a).children(D).removeClass(C).removeClass(a),o.element.removeClass(T+"-"+n.directions[r].reverse)),o._closing=!1,o._trigger(c)},destroy:function(){var t,i=this,a=i.options,o=i.element.off(z);r.fn.destroy.call(i),a.toggleTarget&&e(a.toggleTarget).off(z),a.modal||(F.unbind(i.downEvent,i._mousedownProxy),i._scrollableParents().unbind(P,i._resizeProxy),M.unbind(I,i._resizeProxy)),n.destroy(i.element.children()),o.removeData(),a.appendTo[0]===document.body&&(t=o.parent(".k-animation-container"),t[0]?t.remove():o.remove())},open:function(t,i){var r,o,s,u=this,c={isFixed:!isNaN(parseInt(i,10)),x:t,y:i},d=u.element,p=u.options,f="down",h=e(p.anchor),g=d[0]&&d.hasClass("km-widget");if(!u.visible()){if(p.copyAnchorStyles&&(g&&"font-size"==V[0]&&V.shift(),d.css(n.getComputedStyles(h[0],V))),d.data("animating")||u._trigger(l))return;p.modal||(F.unbind(u.downEvent,u._mousedownProxy).bind(u.downEvent,u._mousedownProxy),a.mobileOS.ios||a.mobileOS.android||(u._scrollableParents().unbind(P,u._resizeProxy).bind(P,u._resizeProxy),M.unbind(I,u._resizeProxy).bind(I,u._resizeProxy))),u.wrapper=o=n.wrap(d,p.autosize).css({overflow:_,display:"block",position:v}),a.mobileOS.android&&o.css(O,"translatez(0)"),o.css(y),e(p.appendTo)[0]==document.body&&o.css(m,"-10000px"),r=H(!0,{},p.animation.open),u.flipped=u._position(c),r.effects=n.parseEffects(r.effects,u.flipped),f=r.effects.slideIn?r.effects.slideIn.direction:f,p.anchor!=b&&(s=T+"-"+f,d.addClass(T+"-"+n.directions[f].reverse),h.addClass(s).children(D).addClass(C).addClass(s)),d.data(x,r.effects).kendoStop(!0).kendoAnimate(r)}},toggle:function(){var e=this;e[e.visible()?u:l]()},visible:function(){return this.element.is(":"+k)},close:function(t){var i,r,a,o,s=this,l=s.options;if(s.visible()){if(i=s.wrapper[0]?s.wrapper:n.wrap(s.element).hide(),s._closing||s._trigger(u))return;s.element.find(".k-popup").each(function(){var n=e(this),i=n.data("kendoPopup");i&&i.close(t)}),F.unbind(s.downEvent,s._mousedownProxy),s._scrollableParents().unbind(P,s._resizeProxy),M.unbind(I,s._resizeProxy),t?r={hide:!0,effects:{}}:(r=H(!0,{},l.animation.close),a=s.element.data(x),o=r.effects,!o&&!n.size(o)&&a&&n.size(a)&&(r.effects=a,r.reverse=!0),s._closing=!0),s.element.kendoStop(!0),i.css({overflow:_}),s.element.kendoAnimate(r)}},_trigger:function(e){return this.trigger(e,{type:e})},_resize:function(e){var n=this;"resize"===e.type?(clearTimeout(n._resizeTimeout),n._resizeTimeout=setTimeout(function(){n._position(),n._resizeTimeout=null},50)):n._hovered||t(n.element[0],s())||n.close()},_mousedown:function(i){var r=this,a=r.element[0],o=r.options,s=e(o.anchor)[0],l=o.toggleTarget,u=n.eventTarget(i),c=e(u).closest(".k-popup"),d=c.parent().parent(".km-shim").length;c=c[0],(d||!c||c===r.element[0])&&"popover"!==e(i.target).closest("a").data("rel")&&(t(a,u)||t(s,u)||l&&t(e(l)[0],u)||r.close())},_fit:function(e,t,n){var i=0;return e+t>n&&(i=n-(e+t)),0>e&&(i=-e),i},_flip:function(e,t,n,i,r,a,o){var s=0;return o=o||t,a!==r&&a!==p&&r!==p&&(e+o>i&&(s+=-(n+t)),0>e+s&&(s+=n+t)),s},_scrollableParents:function(){return e(this.options.anchor).parentsUntil("body").filter(function(e,t){var i=n.getComputedStyles(t,["overflow"]);return"visible"!=i.overflow})},_position:function(t){var n,i,r,s,l,u,c,d,p,f=this,h=f.element.css(y,""),m=f.wrapper,g=f.options,_=e(g.viewport),b=_.offset(),k=e(g.anchor),x=g.origin.toLowerCase().split(" "),C=g.position.toLowerCase().split(" "),T=f.collisions,S=a.zoomLevel(),D=10002,E=!!(_[0]==window&&window.innerWidth&&1.02>=S),F=0,M=E?window.innerWidth:_.width(),P=E?window.innerHeight:_.height(),I=k.parents().filter(m.siblings());if(I[0])if(i=Math.max(+I.css("zIndex"),0))D=i+10;else for(n=k.parentsUntil(I),r=n.length;r>F;F++)i=+e(n[F]).css("zIndex"),i&&i>D&&(D=i+10);return m.css("zIndex",D),m.css(t&&t.isFixed?{left:t.x,top:t.y}:f._align(x,C)),s=o(m,y,k[0]===m.offsetParent()[0]),l=o(m),u=k.offsetParent().parent(".k-animation-container,.k-popup,.k-group"),u.length&&(s=o(m,y,!0),l=o(m)),_[0]===window?(l.top-=window.pageYOffset||document.documentElement.scrollTop||0,l.left-=window.pageXOffset||document.documentElement.scrollLeft||0):(l.top-=b.top,l.left-=b.left),f.wrapper.data(w)||m.data(w,H({},s)),c=H({},l),d=H({},s),"fit"===T[0]&&(d.top+=f._fit(c.top,m.outerHeight(),P/S)),"fit"===T[1]&&(d.left+=f._fit(c.left,m.outerWidth(),M/S)),p=H({},d),"flip"===T[0]&&(d.top+=f._flip(c.top,h.outerHeight(),k.outerHeight(),P/S,x[0],C[0],m.outerHeight())),"flip"===T[1]&&(d.left+=f._flip(c.left,h.outerWidth(),k.outerWidth(),M/S,x[1],C[1],m.outerWidth())),h.css(y,v),m.css(d),d.left!=p.left||d.top!=p.top},_align:function(t,n){var i,r=this,a=r.wrapper,s=e(r.options.anchor),l=t[0],u=t[1],c=n[0],d=n[1],f=o(s),m=e(r.options.appendTo),v=a.outerWidth(),_=a.outerHeight(),b=s.outerWidth(),w=s.outerHeight(),y=f.top,k=f.left,x=Math.round;return m[0]!=document.body&&(i=o(m),y-=i.top,k-=i.left),l===g&&(y+=w),l===p&&(y+=x(w/2)),c===g&&(y-=_),c===p&&(y-=x(_/2)),u===h&&(k+=b),u===p&&(k+=x(b/2)),d===h&&(k-=v),d===p&&(k-=x(v/2)),{top:y,left:k}}});i.plugin(B)}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(e,t){t()});